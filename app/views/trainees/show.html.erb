<%= content_for(:breadcrumbs) do %>
  <%= render_component GovukComponent::BackLink.new(
    text: 'All records',
    href: trainees_path
  ) %>
<% end %>

<h1 class="govuk-heading-l">
  <span class="govuk-caption-l">Add a trainee</span>
  Overview
</h1>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds-from-desktop">
    <%= render_component TaskList::View.new(classes: "record-setup") do |component|
      component.slot(
        :row,
        task_name: 'Record setup',
        path: "",
        status: 'completed'
      )
    end %>

    <h2 class="govuk-heading-m">Trainee details</h2>

    <%= render_component TaskList::View.new(classes: "personal-details") do |component|
      component.slot(
        :row,
        task_name: 'Personal details',
        path: edit_trainee_personal_details_path(@trainee),
        status: 'completed'
      )

      component.slot(
        :row,
        task_name: 'Contact details',
        path: edit_trainee_contact_details_path(@trainee),
        status: 'in progress'
      )

      component.slot(
        :row,
        task_name: 'Diversity information',
        path: '#details',
        status: 'not started'
      )
    end %>

    <h2 class="govuk-heading-m">Education</h2>

    <%= render_component TaskList::View.new(classes: "education") do |component|
      component.slot(
        :row,
        task_name: 'GCSE',
        path: "#",
        status: 'completed'
      )

      component.slot(
        :row,
        task_name: 'Degree',
        path:   @trainee.degrees.present?  ? trainee_degrees_confirm_path(@trainee) : new_trainee_degree_path(@trainee),
        status: 'in progress'
      )
    end %>

    <h2 class="govuk-heading-m">Assessment</h2>

    <%= render_component TaskList::View.new(classes: "assessment") do |component|
      component.slot(
        :row,
        task_name: 'Assessment details',
        path: course_details_trainee_path(@trainee),
        status: 'completed'
      )
    end %>
  </div>
</div>

<%= form_with url: trn_submissions_path, method: :post, local: true do |f| %>
  <%= hidden_field_tag :trainee_id, @trainee.id %>
  <%= f.govuk_submit "Check and submit for TRN" %>
<%- end -%>

<p class="govuk-body"><%= govuk_link_to("Save as draft", "#") %></p>
